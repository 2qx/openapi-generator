 /*
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */

import { logger } from "./logger";
import { ExpressServer } from "./expressServer";

import { config } from "./config";

class App {
  constructor(config) {
    this.config = config;
  }

  async launch() {
    try {
      this.expressServer = new ExpressServer(this.config.URL_PORT, this.config.OPENAPI_YAML);
      // this.expressServer.app.use(swaggerRouter());
      await this.expressServer.launch();
      logger.info("Express server running");
    } catch (error) {
      logger.error(error);
      await this.close();
    }
  }

  async close() {
    if (this.expressServer !== undefined) {
      await this.expressServer.close();
      logger.info(`Server shut down on port ${this.config.URL_PORT}`);
    }
  }
}

module.exports = App;
